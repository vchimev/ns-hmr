const { reload } = require("./hot-loader-helper");

module.exports = function (source) {
    const hmrStyleType = 'script';
    console.log("---> script-hot-loader this.context", this.context);
    const resourceFilePath = this.resourcePath.replace(this.context, '.');
    console.log("---> script-hot-loader resourceFilePath", resourceFilePath);
    console.log("---> script-hot-loader source:", source);
    const result = `${source};${reload({ type: hmrStyleType, resource: resourceFilePath })}`;
    console.log("---> script-hot-loader return:", result);
    return result;
};
